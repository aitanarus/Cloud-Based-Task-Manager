@using BlazorWASM.HttpClients.Interfaces
@using ComponentsLib
@using Core.DTOs
@using Core.IBase
@page "/counter"

<PageTitle>Counter</PageTitle>

<ComponentsLib.TaskForm OnButtonClick="HandleMyComponentButtonClick" />

@code {
        [Inject]
        private ITaskService TaskService { get; set; }

        private async Task HandleMyComponentButtonClick()
        {
            var mockTask = new TaskDTO
                (
                    2,
                    "Write Unit Tests",
                    "Write unit tests for the data access layer.",
                    DateTime.Now.AddDays(3), // Due date set to 3 days from now
                    TaskPriority.Medium,    // Priority set to Medium
                    "Jane Smith"
               );

            try
            {
                // Pass the mock TaskDTO object to the CreateAsync method
                var createdTask = await TaskService.CreateAsync(mockTask);
                Console.WriteLine($"Task created successfully with ID: {createdTask.Id}");
            }
            catch (Exception ex)
            {
                Console.WriteLine($"Error creating task: {ex.Message}");
            }
    }
}
